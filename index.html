<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Meteo</title>
    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/meteo.css" rel="stylesheet">
</head>

<body>

<!-- Modal -->
<div id="dayXmodal" class="modal fade" role="dialog"> </div>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">Home</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="#">Meteo</a>
                    </li>
                    <li>
                        <a href="#">Services</a>
                    </li>
                    <li>
                        <a href="#">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Content -->
    <div class="container">
        <div id="custom-search-input">
            <div class="input-group col-md-12">
                <input type="text" class="form-control input-lg" placeholder="Search a city (not working yet)" />
                <span class="input-group-btn">
                    <button class="btn btn-info btn-lg" type="button">
                        <i class="glyphicon glyphicon-search"></i>
                    </button>
                </span>
            </div>
        </div>
        <!-- heading -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Météo 
                    <small id="jour-name"></small>
                </h1>
            </div>
        </div>
        <!-- /.row -->
        <div class="row">
            <div class="col-sm-3 col-xs-6">
                <div id="lempdes" class="panel panel-default">
                    <div class="panel-heading" id="lempdes-h"></div>
                    <div class="panel-body" id="lempdes-b"></div>
                </div>
            </div>
            <div class="col-sm-3 col-xs-6">
                <div id="colombes" class="panel panel-default">
                    <div class="panel-heading" id="colombes-h"></div>
                    <div class="panel-body" id="colombes-b"></div>
                </div>
            </div>
            <div class="col-sm-3 col-xs-6">
                <div id="voiron" class="panel panel-default">
                    <div class="panel-heading" id="voiron-h"></div>
                    <div class="panel-body" id="voiron-b"></div>
                </div>
            </div>
            <div class="col-sm-3 col-xs-6">
                <div id="marin" class="panel panel-default">
                    <div class="panel-heading" id="marin-h"></div>
                    <div class="panel-body" id="marin-b"></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-3 col-xs-6">
                <div id="merignac" class="panel panel-default">
                    <div class="panel-heading" id="merignac-h"></div>
                    <div class="panel-body" id="merignac-b"></div>
                </div>
            </div>
            <div class="col-sm-3 col-xs-6">
                <div id="bonhomme" class="panel panel-default">
                    <div class="panel-heading" id="bonhomme-h"></div>
                    <div class="panel-body" id="bonhomme-b"></div>
                </div>
            </div>
            <div class="col-sm-3 col-xs-6">
                <div id="ussel" class="panel panel-default">
                    <div class="panel-heading" id="ussel-h"></div>
                    <div class="panel-body" id="ussel-b"></div>
                </div>
            </div>
        </div>
        <!-- /.row -->

        <hr>

        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                    <p>Copyright &copy; Meteo Bichon 2016</p>
                </div>
            </div>
            <!-- /.row -->
        </footer>

    </div>
    <!-- /.container -->

    <!-- jQuery -->
    <script src="js/jquery.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

</body>

</html>

<script>
    var w = window.innerWidth;
    var h = window.innerHeight;
    var date = new Date();
    var jour = new Array( "Dimanche","Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi");
    var mois = new Array( "Janvier", "Fevrier", "Mars", "Avril", "Mai", "Juin", "Juillet", "Aout", "Septembre", "Octobre", "Novembre", "Decembre" );
    var date = new Date();
$(document).ready(function() {
    $('#jour-name').html(jour[date.getDay()]+" "+date.getDate()+" "+mois[date.getMonth()]);

/*    "currently": {
        "time": 1448752021, --> martinique
        "summary": "Nuageux",
        "icon": "partly-cloudy-night",
        "precipIntensity": 0,
        "precipProbability": 0,
        "temperature": 8.09,
        "apparentTemperature": 6.29,
        "humidity": 0.8,
        "windSpeed": 10.38,
        "windBearing": 205,
        "cloudCover": 0.89,
    },*/


    $.getJSON('data/meteodataLempdes.json', function(data) {
        //data.currently
        $('#lempdes-h').html('<div class="row"><h5><small style="font-size:18px;vertical-align:center"> <div class="col-sm-8">Lempdes</div>'+
            '<div class="col-sm-4">'+timeConverterHour(data.currently.time)+'0h</small></h5></div></div></div>');
        $('#lempdes-b').html('<div class="row">'+
                '<div class="col-sm-4">'+
                    '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="50" width="50">'+
                    '<image x="" y="0" width="50" height="50" xlink:href="fonts/SVG/'+ data.currently.icon+'.svg" />'+
                    '</svg></div><div class="col-sm-5">'+
                    '<h3><small style="font-size:20px">'+data.currently.temperature+' °C</h3></small>'+
                '</div><div class="col-sm-3">'+
                    '<h3><small style="font-size:10px">'+data.currently.apparentTemperature+' °C</h3></small>'+
                '</div></div><div class="row"><div class="col-sm-5">'+
                    '<h3><small style="font-size:14px"> Pluie : '+(data.currently.precipProbability*100)+'%</h3></small>'+
                '</div><div class="col-sm-7">'+
                    '<h3><small style="font-size:14px"> Humidité : '+(data.currently.humidity*100)+'%</h3></small>'+
                '</div></div>');
    });

    $.getJSON('data/meteodataColombes.json', function(data) {
        $('#colombes-h').html('<div class="row"><h5><small style="font-size:18px;vertical-align:center"> <div class="col-sm-8">Colombes</div>'+
            '<div class="col-sm-4">'+timeConverterHour(data.currently.time)+'0h</small></h5></div></div></div>');
        $('#colombes-b').html('<div class="row">'+
                '<div class="col-sm-4">'+
                    '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="50" width="50">'+
                    '<image x="" y="0" width="50" height="50" xlink:href="fonts/SVG/'+ data.currently.icon+'.svg" />'+
                    '</svg></div><div class="col-sm-5">'+
                    '<h3><small style="font-size:20px">'+data.currently.temperature+' °C</h3></small>'+
                '</div><div class="col-sm-3">'+
                    '<h3><small style="font-size:10px">'+data.currently.apparentTemperature+' °C</h3></small>'+
                '</div></div><div class="row"><div class="col-sm-5">'+
                    '<h3><small style="font-size:14px"> Pluie : '+(data.currently.precipProbability*100)+'%</h3></small>'+
                '</div><div class="col-sm-7">'+
                    '<h3><small style="font-size:14px"> Humidité : '+(data.currently.humidity*100)+'%</h3></small>'+
                '</div></div>');
    });

    $.getJSON('data/meteodataVoiron.json', function(data) {
        $('#voiron-h').html('<div class="row"><h5><small style="font-size:18px;vertical-align:center"> <div class="col-sm-8">Tullins</div>'+
            '<div class="col-sm-4">'+timeConverterHour(data.currently.time)+'0h</small></h5></div></div></div>');
        $('#voiron-b').html('<div class="row">'+
                '<div class="col-sm-4">'+
                    '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="50" width="50">'+
                    '<image x="" y="0" width="50" height="50" xlink:href="fonts/SVG/'+ data.currently.icon+'.svg" />'+
                    '</svg></div><div class="col-sm-5">'+
                    '<h3><small style="font-size:20px">'+data.currently.temperature+' °C</h3></small>'+
                '</div><div class="col-sm-3">'+
                    '<h3><small style="font-size:10px">'+data.currently.apparentTemperature+' °C</h3></small>'+
                '</div></div><div class="row"><div class="col-sm-5">'+
                    '<h3><small style="font-size:14px"> Pluie : '+(data.currently.precipProbability*100)+'%</h3></small>'+
                '</div><div class="col-sm-7">'+
                    '<h3><small style="font-size:14px"> Humidité : '+(data.currently.humidity*100)+'%</h3></small>'+
                '</div></div>');
    });

    $.getJSON('data/meteodataMarin.json', function(data) {
        $('#marin-h').html('<div class="row"><h5><small style="font-size:18px;vertical-align:center"> <div class="col-sm-8">Le Marin</div>'+
            '<div class="col-sm-4">'+timeConverterHour(data.currently.time)+'0h</small></h5></div></div></div>');
        $('#marin-b').html('<div class="row">'+
                '<div class="col-sm-4">'+
                    '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="50" width="50">'+
                    '<image x="" y="0" width="50" height="50" xlink:href="fonts/SVG/'+ data.currently.icon+'.svg" />'+
                    '</svg></div><div class="col-sm-5">'+
                    '<h3><small style="font-size:20px">'+data.currently.temperature+' °C</h3></small>'+
                '</div><div class="col-sm-3">'+
                    '<h3><small style="font-size:10px">'+data.currently.apparentTemperature+' °C</h3></small>'+
                '</div></div><div class="row"><div class="col-sm-5">'+
                    '<h3><small style="font-size:14px"> Pluie : '+(data.currently.precipProbability*100)+'%</h3></small>'+
                '</div><div class="col-sm-7">'+
                    '<h3><small style="font-size:14px"> Humidité : '+(data.currently.humidity*100)+'%</h3></small>'+
                '</div></div>');
    });

    $.getJSON('data/meteodataMerignac.json', function(data) {
        $('#merignac-h').html('<div class="row"><h5><small style="font-size:18px;vertical-align:center"> <div class="col-sm-8">Merignac</div>'+
            '<div class="col-sm-4">'+timeConverterHour(data.currently.time)+'0h</small></h5></div></div></div>');
        $('#merignac-b').html('<div class="row">'+
                '<div class="col-sm-4">'+
                    '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="50" width="50">'+
                    '<image x="" y="0" width="50" height="50" xlink:href="fonts/SVG/'+ data.currently.icon+'.svg" />'+
                    '</svg></div><div class="col-sm-5">'+
                    '<h3><small style="font-size:20px">'+data.currently.temperature+' °C</h3></small>'+
                '</div><div class="col-sm-3">'+
                    '<h3><small style="font-size:10px">'+data.currently.apparentTemperature+' °C</h3></small>'+
                '</div></div><div class="row"><div class="col-sm-5">'+
                    '<h3><small style="font-size:14px"> Pluie : '+(data.currently.precipProbability*100)+'%</h3></small>'+
                '</div><div class="col-sm-7">'+
                    '<h3><small style="font-size:14px"> Humidité : '+(data.currently.humidity*100)+'%</h3></small>'+
                '</div></div>');
    });

    $.getJSON('data/meteodataBonhom.json', function(data) {
        $('#bonhomme-h').html('<div class="row"><h5><small style="font-size:18px;vertical-align:center"> <div class="col-sm-8">Le Bonhomme</div>'+
            '<div class="col-sm-4">'+timeConverterHour(data.currently.time)+'0h</small></h5></div></div></div>');
        $('#bonhomme-b').html('<div class="row">'+
                '<div class="col-sm-4">'+
                    '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="50" width="50">'+
                    '<image x="" y="0" width="50" height="50" xlink:href="fonts/SVG/'+ data.currently.icon+'.svg" />'+
                    '</svg></div><div class="col-sm-5">'+
                    '<h3><small style="font-size:20px">'+data.currently.temperature+' °C</h3></small>'+
                '</div><div class="col-sm-3">'+
                    '<h3><small style="font-size:10px">'+data.currently.apparentTemperature+' °C</h3></small>'+
                '</div></div><div class="row"><div class="col-sm-5">'+
                    '<h3><small style="font-size:14px"> Pluie : '+(data.currently.precipProbability*100)+'%</h3></small>'+
                '</div><div class="col-sm-7">'+
                    '<h3><small style="font-size:14px"> Humidité : '+(data.currently.humidity*100)+'%</h3></small>'+
                '</div></div>');
    });

    $.getJSON('data/meteodataUssel.json', function(data) {
        $('#ussel-h').html('<div class="row"><h5><small style="font-size:18px;vertical-align:center"> <div class="col-sm-8">Ussel</div>'+
            '<div class="col-sm-4">'+timeConverterHour(data.currently.time)+'0h</small></h5></div></div></div>');
        $('#ussel-b').html('<div class="row">'+
                '<div class="col-sm-4">'+
                    '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="50" width="50">'+
                    '<image x="" y="0" width="50" height="50" xlink:href="fonts/SVG/'+ data.currently.icon+'.svg" />'+
                    '</svg></div><div class="col-sm-5">'+
                    '<h3><small style="font-size:20px">'+data.currently.temperature+' °C</h3></small>'+
                '</div><div class="col-sm-3">'+
                    '<h3><small style="font-size:10px">'+data.currently.apparentTemperature+' °C</h3></small>'+
                '</div></div><div class="row"><div class="col-sm-5">'+
                    '<h3><small style="font-size:14px"> Pluie : '+(data.currently.precipProbability*100)+'%</h3></small>'+
                '</div><div class="col-sm-7">'+
                    '<h3><small style="font-size:14px"> Humidité : '+(data.currently.humidity*100)+'%</h3></small>'+
                '</div></div>');
    });




});



$(document).on("click", "#lempdes", function(e){
    window.location.href = "html/lempdes.html";
});
$(document).on("click", "#colombes", function(e){
    window.location.href = "html/colombes.html";
});
$(document).on("click", "#voiron", function(e){
    window.location.href = "html/voiron.html";
});
$(document).on("click", "#marin", function(e){
    window.location.href = "html/marin.html";
});
$(document).on("click", "#merignac", function(e){
    window.location.href = "html/merignac.html";
});
$(document).on("click", "#bonhomme", function(e){
    window.location.href = "html/bonhomme.html";
});
$(document).on("click", "#ussel", function(e){
    window.location.href = "html/ussel.html";
});


function getHourColor(icon){
    if(icon == "clear-day"){
        return "background-color:rgba(255,255,0,0.3)";
    } 
    else if(icon == "clear-night"){
        return "background-color:rgba(77,77,219,0.3)";
    } 
    else if(icon == "rain"){
        return "background-color:rgba(255,255,0,0.3)";
    } 
    else if(icon == "snow"){
        return "background-color:rgba(205,205,205,0.5)";
    } 
    else if(icon == "sleet"){
        return "background-color:rgba(205,205,205,0.8)";
    } 
    else if(icon == "wind"){
        return "background-color:rgba(255,255,0,0.3)";
    }   
    else if(icon == "fog"){
        return "background-color:rgba(192,192,192,0.5)";
    }
    else if(icon == "cloudy"){
        return "background-color:rgba(192,192,192,0.8)";
    } 
    else if(icon == "partly-cloudy-day"){
        return "background-color:rgba(192,192,192,0.4)";
    } 
    else if(icon == "partly-cloudy-night"){
        return "background-color:rgba(37,37,150,0.5)";
    } 
}


function avgTempDay(hourly){
    var temp=0;
    for (var i=0; i<24; i++){
        temp += hourly.data[i].temperature;
    }
    return Math.round((temp/24)*10)/10;
}


function avgTempRessentiDay(hourly){
    var temp=0;
    for (var i=0; i<24; i++){
        temp += hourly.data[i].apparentTemperature;
    }
    return Math.round((temp/24)*10)/10;
}

function getCouverture(cover){
    if (cover <=0.15){
        return "Ciel dégagé";
    }
    else if ((cover >=0.15)||(cover <= 0.50)) {
        return "Nuages épars";
    }
    else if ((cover >=0.50)||(cover <= 0.75)) {
        return "Ciel nuageux";
    }
    else if (cover >=0.75) {
        return "Ciel couvert";
    }
}

function tradPrecType(type){
    if (typeof type === 'undefined') { 
        return "";
    }
    else if (type == "rain"){
        return "Pluie";
    }
    else if (type == "snow"){
        return "Neige";
    }
    else if (type == "sleet"){
        return "Pluie verglaçante";
    }
    else if (type == "hail"){
        return "Grêle";
    }
}


function timeConverterHour(UNIX_timestamp){
    if (typeof UNIX_timestamp === 'undefined') { 
        return "";
    }
    var a = new Date(UNIX_timestamp * 1000);
    var hour = a.getHours();
    var min = a.getMinutes();
    var time = hour + ':' + min ;
    return time;
}

function getIconWindBearing(windBearing){
    var nb =  Math.round(windBearing/45);
    return 'wind-'+(nb-1)+'.svg';

}

function timeConverterDay(UNIX_timestamp){
    var a = new Date(UNIX_timestamp * 1000);
    var jour = new Array( "Dimanche", "Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi" );
    console.log(jour[a.getDay()]);
    return jour[a.getDay()];
}

function timeConverter(UNIX_timestamp){
    var a = new Date(UNIX_timestamp * 1000);
    var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
    var year = a.getFullYear();
    var month = months[a.getMonth()];
    var date = a.getDate();
    var hour = a.getHours();
    var min = a.getMinutes();
    //var sec = a.getSeconds();
    var time = date + ' ' + month + ' ' + year + ' ' + hour + ':' + min ;//+ ':' + sec ;
}
</script>
